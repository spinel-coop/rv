#!/usr/bin/env bash
set -euo pipefail

# Integration test: build and run rv on Alpine Linux

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
ROOT_DIR="$(cd "$SCRIPT_DIR/../.." && pwd)"

docker run --rm -v "$ROOT_DIR:/rv" -w /rv rust:alpine sh -c "apk add --no-cache build-base && ./bin/build && ./target/release/rv --version && ./target/release/rv --help"

echo ""
echo "Integration test for Alpine passed!"
